<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calc2</title>
<style>
  body {
    background-color: rgb(13, 15, 58);
    font-family: Arial, Helvetica, sans-serif;
    font-weight: bold;
  }

  .wrapper {
    display: grid;
    place-items: center;
    height: 100vh;
  }

  .calc {
    position: relative; 
    display: grid;
    bottom: 5%;
    grid-template-columns: repeat(4, 80px);
    grid-template-rows: 100px repeat(4, 80px);
    gap: 5px;
    width: max-content;
    background: linear-gradient(45deg, rgb(40, 1, 79), rgb(34, 1, 118));
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    overflow: visible;
    
  }
  
  .display {
    grid-column: 1 / -1;
    color: white;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 13px;
    font-size: 2em;
    border-radius: 10px;
    box-shadow: rgba(0, 0, 0, 0.3) 0.125rem 0.1875rem 0.5rem;
    position: relative;
    overflow: hidden;
    background: transparent;
    z-index: 2;
  }

  .display .value {
    position: relative;
    z-index: 5;                 /* важное — держим текст поверх псевдоэлементов */
    pointer-events: none;
    text-shadow: 0 1px 2px rgba(0,0,0,0.8); 
    display: inline-block;
    white-space: nowrap;
    max-width: 28ch;            /* чтобы длинные числа не ломали верстку */
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* псевдоэлементы градиентов (чтобы цвета плавно менялись) */
  .display::before, .display::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 10px;
    z-index: 1;
    pointer-events: none;
    will-change: opacity;
  }

  .display::before {
    background: linear-gradient(to right, rgb(22, 1, 81), rgb(0, 0, 0));
    opacity: 1;
    animation: crossfadeA 10s ease-in-out infinite;
  }

  .display::after {
    background: linear-gradient(to right, rgb(0, 0, 0), rgb(22, 1, 81));
    opacity: 0;
    animation: crossfadeB 10s ease-in-out infinite;
  }

  @keyframes crossfadeA {
    0%   { opacity: 1; }
    45%  { opacity: 0; }
    55%  { opacity: 0; }
    100% { opacity: 1; }
  }
  @keyframes crossfadeB {
    0%   { opacity: 0; }
    45%  { opacity: 1; }
    55%  { opacity: 1; }
    100% { opacity: 0; }
  }

  @property --angle{
    syntax: "<angle>";
    initial-value: 0deg;
    inherits: false;
  }

  .calc::after, .calc::before {
    content: "";
    position: absolute;
    inset: -3px;          
    background-image: conic-gradient(from var(--angle), rgb(255, 0, 217), rgb(255, 0, 238), rgb(174, 0, 255), rgb(174, 0, 255), rgb(38, 0, 255), rgb(0, 17, 255), rgb(0, 98, 255), rgb(255, 0, 217));
    z-index: -2; /* чтобы точно быть позади корпуса */
    pointer-events: none;
    border-radius: 15px;
    animation: 7s spin linear infinite;
  }

  .calc::before {
    filter: blur(1.5rem);
    opacity: 0.7;
  }
  @keyframes spin {
    from{ --angle: 0deg }
    to  { --angle:360deg }
  }

  button {
    font-size: 1.5em;
    border-radius: 10%;
    background: linear-gradient(to top, rgb(17, 4, 159), rgb(19, 3, 231));
    color: white;
    border: 1px solid black;
    box-shadow: rgba(0, 0, 0, 0.3) 0.125rem 0.1875rem 0.5rem;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    -webkit-tap-highlight-color: transparent;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
  }
  
  button:hover {
    background: linear-gradient(to top, rgb(23, 5, 180), rgb(19, 3, 231));
    box-shadow: 0 2px 6px rgba(0,0,0,0.25) inset;
    transform: scale(1.05);
  }
  
  button:active {
    transform: translateY(3px) scale(0.99);
    box-shadow: 0 2px 6px rgba(0,0,0,0.25) inset;
    background: linear-gradient(to bottom, rgb(19, 5, 178), rgb(19, 3, 231));
  }
  
  #delete {
    position: relative;
    font-size: 2rem;
    width: 23rem;
    height: 6rem;
    border-radius: 18px;
    background: linear-gradient(to top, rgb(76, 3, 171), rgb(55, 0, 255));
    border: none;
  }

   #delete::after, #delete::before {
    content: "";
    position: absolute;
    height: 100%;
    width: 100%;
    background-image: conic-gradient(
      from var(--angle),
      rgb(255, 0, 217),  /* розовый край */
      rgb(255, 0, 238),
      rgb(174, 0, 255),
      rgb(200, 0, 255),
      rgb(212, 0, 255),
      rgb(153, 0, 255),   /* глубокий синий центр */
      rgb(212, 60, 255),
      rgb(200, 0, 255),
      rgb(174, 0, 255),
      rgb(255, 0, 238),
      rgb(255, 0, 217)   /* розовый край */
    );
    z-index: -2;
    top: 50%;
    left: 50%;
    translate: -50% -50%;
    z-index: -1;
    padding: 3px;
    border-radius: 18px;
    animation: 7s spin linear infinite;
  }

  #delete::before {
    filter: blur(1.5rem);
    opacity: 0.7;
  }
 
  @keyframes spin {
    from{ --angle: 0deg }
    to  { --angle:360deg }
  }

  /* ========== MOBILE-ONLY OVERRIDES (только для телефонов) ========== */
  /* меняются только размеры/шрифты/отступы; на десктопе все, как у тебя было */
 .wrapper {
      padding: 14px;
      align-items: center; /* не растягиваем, держим центр */
    }

    /* НЕ РАСТЯГИВАЕМ: сохраняем intrinsic width (max-content),
       но делаем кнопки чуть крупнее за счёт фиксированных колонок */
    .calc {
      width: max-content;                 /* keep intrinsic size, no full-width stretch */
      grid-template-columns: repeat(4, 64px); /* чуть компактнее, но крупнее кнопки */
      grid-template-rows: 100px repeat(4, 64px);
      gap: 8px;
      padding: 12px;
      border-radius: 14px;
      bottom: 0;
      justify-self: center;
    }

    .display {
      padding: 12px;
      font-size: 2.05rem;
      min-height: 78px;
      border-radius: 12px;
    }

    .display .value {
      max-width: 90%;
      font-size: inherit;
    }

    button {
      font-size: 1.5rem;
      border-radius: 12px;
      height: 100%;
      min-height: 62px;
    }

    /* Delete — делаем компактнее и ближе к калькулятору (меньший margin-bottom) */
    #delete {
      width: 300px;                /* не тянем на всю ширину */
      padding: 0 16px;
      height: 56px;
      font-size: 1.45rem;
      border-radius: 14px;
      margin-bottom: 6px;        /* ближе к кальку */
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  

  /* для очень узких экранов — чуть уменьшаем, но тоже не растягиваем */
  @media (max-width: 420px) {
    .calc {
      grid-template-columns: repeat(4, 60px);
      grid-template-rows: 112px repeat(4, 60px);
      gap: 7px;
      padding: 10px;
      width: max-content;
    }

    .display { font-size: 2.2rem; min-height: 82px; padding: 10px; }
    button { font-size: 1.45rem; min-height: 64px; }
    #delete { height: 54px; font-size: 1.4rem; width: auto; margin-bottom: 6px; padding: 0 14px; }
  }
  /* ========== END MOBILE OVERRIDES ========== */


</style>
</head>

<body>
  
  
  <div class="wrapper">    
    <button id="delete">Delete</button>
    <div class="calc">
      <div class="display"><span class="value">0</span></div>
      
      
      <button id="btn-7">7</button>
      <button id="btn-8">8</button>
      <button id="btn-9">9</button>
      <button>/</button>
      
      <button id="btn-4">4</button>
      <button id="btn-5">5</button>
      <button id="btn-6">6</button>
      <button>*</button>
      
      <button id="btn-1">1</button>
      <button id="btn-2">2</button>
      <button id="btn-3">3</button>
      <button>-</button>
      
      <button id="btn-0">0</button>
      <button id="btn-dot">.</button>
      <button>=</button>
      <button>+</button>
      </div>
    </div>
  
    <script>
    const buttons = document.querySelectorAll("button");
    const valueElem = document.querySelector(".display .value");

    const operators = ["+", "-", "*", "/", "."];

    function showError() {
      valueElem.textContent = "Error";
      setTimeout(() => {
      valueElem.textContent = ""; 
      }, 1500); 
    }


    function calculate() {
      let expr = valueElem.textContent;

      if (expr.trim() === "") {
        showError();
        return;
      }

      if (/\/0(?!\d)/.test(expr)) {
        showError();
        return;
      }

      try {
        let result = eval(expr);
        valueElem.textContent = parseFloat(result.toFixed(10));
      } catch {
        valueElem.textContent = "Error";
      }
    }

    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        const btn_val = btn.textContent.trim();
        let current = valueElem.textContent;

        if (btn_val === "=") {
          calculate();
        } else {
        if (operators.includes(btn_val)) {
          let lastChar = current.slice(-1);
          if (operators.includes(lastChar)) {
            return;
          }
        }
    
        if (valueElem.textContent === "0" || valueElem.textContent === "Error") {
          valueElem.textContent = btn_val;
         } else {
             valueElem.textContent += btn_val;
            }
          }
        if (btn_val === "Delete") {
          valueElem.textContent = current.slice(0, -1);
        }
        
        });
      });  
  </script>
</body>
</html>
